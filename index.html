<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icon.png">
  <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≤–µ—Å–∞ —à—Ç–∞–Ω–≥–∏</title>
  <style>
    body {
      background: #fff;
      color: #000;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      margin: 0;
      padding: 20px;
    }
    .menu-button {
      font-size: 2em;
      cursor: pointer;
      padding: 10px;
      position: fixed;
      top: 10px;
      left: 10px;
      z-index: 1000;
    }
    #sidebar {
      position: fixed;
      left: -260px;
      top: 0;
      width: 250px;
      height: 100%;
      background: #f0f0f0;
      box-shadow: 2px 0 5px rgba(0,0,0,0.2);
      padding: 20px;
      transition: left 0.3s;
      z-index: 999;
    }
    #sidebar.show {
      left: 0;
    }
    #sidebar h2 {
      margin-top: 0;
    }
    #sidebar ul {
      list-style: none;
      padding: 0;
    }
    #sidebar li {
      padding: 10px 0;
      cursor: pointer;
      font-size: 1.2em;
    }
    #sidebar li.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .section {
      display: none;
    }

    .section.active {
      display: block;
    }

    input[type=number] {
      padding: 12px 16px;
      font-size: 1.2em;
      width: 220px;
      border: 2px solid #000;
      border-radius: 14px;
      margin-bottom: 20px;
      outline: none;
    }

    button {
      background: #000;
      color: #fff;
      border: none;
      border-radius: 14px;
      padding: 14px 28px;
      font-size: 1.3em;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    button:hover {
      background: #444;
    }

    #result, #resultDetailed, #benchResults {
      margin-top: 30px;
      font-size: 1.3em;
      font-weight: 600;
      line-height: 1.4;
      white-space: pre-wrap;
    }

    #warning {
      margin-top: 15px;
      color: #b00000;
      font-weight: 700;
    }
  </style>
</head>
<body>

<div class="menu-button" onclick="toggleMenu()">‚ò∞</div>

<div id="sidebar">
  <h2>–ú–µ–Ω—é</h2>
  <ul>
    <li onclick="selectMode('plates')">ü•û –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –±–ª–∏–Ω–æ–≤</li>
    <li onclick="selectMode('bench')">üí™ –ñ–∏–º –Ω–∞ —Ä–∞–∑</li>
  </ul>
</div>

<div id="platesSection" class="section active">
  <h1>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≤–µ—Å–∞ —à—Ç–∞–Ω–≥–∏</h1>
  <p>–í–≤–µ–¥–∏—Ç–µ –∂–µ–ª–∞–µ–º—ã–π –≤–µ—Å (–≤ –∫–≥):</p>
  <input type="number" id="weightInput" min="20" step="0.25" value="100" />
  <br/>
  <button onclick="calculatePlates()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –±–ª–∏–Ω—ã</button>
  <div id="warning"></div>
  <div id="result"></div>
  <div id="resultDetailed"></div>
</div>

<div id="benchSection" class="section">
  <h1>–ñ–∏–º –Ω–∞ —Ä–∞–∑</h1>
  <p>–í–≤–µ–¥–∏—Ç–µ –≤–µ—Å (–≤ –∫–≥), –∫–æ—Ç–æ—Ä—ã–π –≤—ã –∂–∞–ª–∏:</p>
  <input type="number" id="benchWeight" min="1" step="0.5" value="100" />
  <p>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π:</p>
  <input type="number" id="benchReps" min="1" step="1" value="10" />
  <br/>
  <button onclick="calculateBenchMax()">–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –º–∞–∫—Å–∏–º—É–º</button>
  <div id="benchResults"></div>
</div>

<script>
  function toggleMenu() {
    document.getElementById("sidebar").classList.toggle("show");
  }

  function selectMode(mode) {
    document.getElementById("sidebar").classList.remove("show");
    document.querySelectorAll('.section').forEach(s => s.classList.remove("active"));
    if (mode === 'plates') {
      document.getElementById('platesSection').classList.add("active");
    } else {
      document.getElementById('benchSection').classList.add("active");
    }
  }

  const plates = [20, 15, 10, 5, 2.5, 1.25];
  const maxPlatesPerType = 7;
  const barWeight = 20;

  function calculatePlates() {
    document.getElementById('warning').textContent = "";
    document.getElementById('result').textContent = "";
    document.getElementById('resultDetailed').textContent = "";

    let desiredWeight = parseFloat(document.getElementById('weightInput').value);

    if (isNaN(desiredWeight)) {
      document.getElementById('warning').textContent = "–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ";
      return;
    }
    if (desiredWeight < barWeight) {
      document.getElementById('warning').textContent = "–í–µ—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–µ –º–µ–Ω—å—à–µ 20 –∫–≥ (–≤–µ—Å —à—Ç–∞–Ω–≥–∏)";
      return;
    }

    let weightPerSide = (desiredWeight - barWeight) / 2;
    if (weightPerSide < 0) {
      document.getElementById('warning').textContent = "–í–µ—Å –º–µ–Ω—å—à–µ –≤–µ—Å–∞ —à—Ç–∞–Ω–≥–∏";
      return;
    }

    let platesPerSide = [];
    let remaining = weightPerSide;

    for (let plate of plates) {
      let count = 0;
      while (remaining >= plate - 0.0001 && count < maxPlatesPerType) {
        platesPerSide.push(plate);
        remaining -= plate;
        count++;
      }
    }

    if (remaining > 0.01) {
      document.getElementById('warning').textContent = "–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Ç–æ—á–Ω–æ —Å–æ–±—Ä–∞—Ç—å —ç—Ç–æ—Ç –≤–µ—Å –±–ª–∏–Ω–∞–º–∏.";
    }

    if (platesPerSide.length === 0) {
      document.getElementById('warning').textContent = "–î–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≤–µ—Å–∞ –Ω–µ –Ω—É–∂–Ω—ã –±–ª–∏–Ω—ã, —Ö–≤–∞—Ç–∏—Ç —à—Ç–∞–Ω–≥–∏.";
      return;
    }

    const simpleOutput = platesPerSide.join(",") + " - " + platesPerSide.join(",");
    document.getElementById('result').textContent = simpleOutput;

    let counts = {};
    platesPerSide.forEach(p => counts[p] = (counts[p] || 0) + 1);

    let detailedLeft = [];
    for (let p of plates) {
      if (counts[p]) {
        detailedLeft.push(`${counts[p]}√ó${p} –∫–≥`);
      }
    }
    const detailedOutput = "–õ–µ–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: " + detailedLeft.join(", ") + "\n–ü—Ä–∞–≤–∞—è —Å—Ç–æ—Ä–æ–Ω–∞: " + detailedLeft.join(", ");
    document.getElementById('resultDetailed').textContent = detailedOutput;
  }

  function calculateBenchMax() {
    const M = parseFloat(document.getElementById("benchWeight").value);
    const k = parseInt(document.getElementById("benchReps").value);

    if (isNaN(M) || isNaN(k) || M <= 0 || k <= 0) {
      document.getElementById("benchResults").textContent = "–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.";
      return;
    }

    const results = [
      { name: "–≠–ø–ª–∏",       value: M * (1 + k / 30) },
      { name: "–ë–∂–∏—Ü–∫–∏",     value: M * (36 / (37 - k)) },
      { name: "–õ–∞–Ω–¥–µ—Ä",     value: (100 * M) / (101.3 - 2.67123 * k) },
      { name: "–õ–æ–º–±–∞—Ä–¥–∏",   value: M * Math.pow(k, 0.10) },
      { name: "–ú—ç–π—Ö—å—é",     value: (100 * M) / (52.2 + 41.9 * Math.exp(-0.055 * k)) },
      { name: "–û‚Äô–ö–æ–Ω–Ω–æ—Ä",   value: M * (1 + 0.025 * k) },
      { name: "–í–∞—Ç–∞–Ω–∞",     value: M / (1.013 - 0.0267123 * k) },
    ];

    let text = "–ú–∞–∫—Å–∏–º—É–º –≤ –∂–∏–º–µ –ª—ë–∂–∞:\n\n";
    results.forEach(r => {
      text += `${r.name}: ${r.value.toFixed(1)} –∫–≥\n`;
    });

    document.getElementById("benchResults").textContent = text;
  }
</script>

</body>
</html>
